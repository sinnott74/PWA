<link rel="import" href="../../../bower_components/polymer/polymer.html">

<dom-module id="app-toast">

  <!-- Defines the element's style and local DOM -->
  <!-- <link rel="stylesheet" type="text/css" href="app-toast.css"> -->
  <template>
    <aside class="toast-view js-toast-view">
      <button class="toast-view__btn-close js-toast-view__btn-close" on-click="hide">&#10006;</button>
      <div class="toast-view__text js-toast-view__text"></div>
    </aside>
  </template>

  <!-- Creates the element's prototype and registers it -->
  <script>
    Polymer({
      is: 'app-toast',
      ready: function() {
        this.view = document.querySelector('.js-toast-view');
        this.closeBtn = document.querySelector('.js-toast-view__btn-close');
        this.text = document.querySelector('.js-toast-view__text');
        this.hideTimeout = 0;

        this.hide = this.hide.bind(this);
        this.toast = this.toast.bind(this);

        this.closeBtn.addEventListener('click', this.hide);

        document.addEventListener('toast', this.toast);

      },
      hide: function(e, detail) {
        console.log('Hiding toast');
        this.view.classList.remove('toast-view--visible');
      },
      toast: function(e) {
        console.log('Showing toast');
        console.log(e);
        this.text.textContent = e.detail;
        this.view.classList.add('toast-view--visible');
      }
    });
  </script>
</dom-module>