<link rel="import" href="../../../../bower_components/polymer/polymer.html">

<dom-module id="app-toast">

  <!-- Defines the element's style and local DOM -->
  <!-- <link rel="stylesheet" type="text/css" href="app-toast.css"> -->
  <template>
    <style>
      :host {
        background-color: var(--background-color-dark);
        border-radius: 3px;
        box-shadow: 0 0 2px rgba(0, 0, 0, .12),
                    0 2px 4px rgba(0, 0, 0, .24);
        color: var( --text-color-light);
        line-height: 20px;
        padding: 16px;
        transition: opacity 200ms,
                    transform 300ms cubic-bezier(.165, .84, .44, 1);
        opacity: 0;
        transform: translateY(20px);
        will-change: transform;
        position: fixed;
        bottom: 0;
        left: 0;
        word-wrap: normal;
      }
      :host.visible {
        opacity: 1;
        transform: translateY(0);
      }
      :host .btn-close {
        border: 0;
        background-color: transparent;
        font-size: 20px;
        float: right;
        cursor: pointer;
      }
      :host .btn-close:hover {
        border: 0;
        background-color: transparent;
        color: var( --text-color-light);
        font-size: 20px;
        float: right;
        cursor: pointer;
      }
      :host .message {
        width: calc(100% - 20px);
      }
    </style>
    <button class="btn-close js-toast-view__btn-close" on-click="_hide">&#10006;</button>
    <div class="message js-toast-view__message">[[text]]</div>
  </template>

  <!-- Creates the element's prototype and registers it -->
  <script>
    Polymer({
      is: 'app-toast',
      ready: function() {
        this.closeBtn = this.querySelector('.js-toast-view__btn-close');
        this.message = this.querySelector('.js-toast-view__message');

        this._hide = this._hide.bind(this);
        this._textChanged = this._textChanged.bind(this);
      },

      properties: {
        text: {
          type: String,
          reflectToAttribute: true,
          observer: '_textChanged'
        }
      },

      _textChanged: function(){
        this.classList.add('visible');
      },

      _hide: function(e, detail) {
        this.classList.remove('visible');
      }
    });
  </script>
</dom-module>